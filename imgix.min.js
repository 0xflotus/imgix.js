(function(){function a(a,b,c){return a&b|~a&c}function b(a,b,c){return a&c|b&~c}function c(a,b,c){return a^b^c}function d(a,b,c){return b^(a|~c)}function e(a){return String.fromCharCode(255&a)+String.fromCharCode(255&a>>>8)+String.fromCharCode(255&a>>>16)+String.fromCharCode(255&a>>>24)}function f(a){for(;0>a;)a+=4294967296;for(;a>4294967295;)a-=4294967296;return a}function g(a,b,c,d,e){var g,h,i,j,k,l,n,o,p;g=d[0],h=d[1],i=d[2],j=d[3],k=e[0],l=e[1],n=e[2],p=c(b[h],b[i],b[j]),o=b[g]+p+a[k]+m[n],o=f(o),o=o<<l|o>>>32-l,o+=b[h],b[g]=f(o)}function h(a){var b,c,d,h,i,j,k,l,m,n,o,p,q;if(d=new Array(1732584193,4023233417,2562383102,271733878),i=a.length,j=63&i,k=56>j?56-j:120-j,k>0)for(a+="Â€",n=0;k-1>n;n++)a+="\x00";for(a+=e(8*i),a+=e(0),i+=k+8,b=new Array(0,1,2,3),c=new Array(16),h=new Array(4),p=0;i>p;p+=64){for(n=0,o=p;16>n;n++,o+=4)c[n]=a.charCodeAt(o)|a.charCodeAt(o+1)<<8|a.charCodeAt(o+2)<<16|a.charCodeAt(o+3)<<24;for(n=0;4>n;n++)h[n]=d[n];for(n=0;4>n;n++)for(l=r[n][0],m=r[n][1],o=0;16>o;o++)g(c,h,l,b,m[o]),q=b[0],b[0]=b[3],b[3]=b[2],b[2]=b[1],b[1]=q;for(n=0;4>n;n++)d[n]+=h[n],d[n]=f(d[n])}return e(d[0])+e(d[1])+e(d[2])+e(d[3])}function i(a){var b,c,d,e;for(e=h(a),c="",b=0;16>b;b++)d=e.charCodeAt(b),c+="0123456789abcdef".charAt(15&d>>4),c+="0123456789abcdef".charAt(15&d);return c}var j=this,k={};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports.imgix=k):j.imgix=k,k._setImgixClass=function(a){var b=k._getXPathClass(k._getElementTreeXPath(a));return a.classList.add(b),b},k._getXPathClass=function(a){return a=a?a:(new Date).getTime().toString(),"imgix-el-"+k.md5(a)},k._getElementTreeXPath=function(a){for(var b=[];a&&a.nodeType==Node.ELEMENT_NODE;a=a.parentNode){for(var c=0,d=a.previousSibling;d;d=d.previousSibling)d.nodeType!=Node.DOCUMENT_TYPE_NODE&&d.nodeName==a.nodeName&&++c;var e=(a.prefix?a.prefix+":":"")+a.localName,f=c?"["+(c+1)+"]":"";b.splice(0,0,e+f)}return b.length?"/"+b.join("/"):null},k.getParamAliases=function(){return{t:"txt",tf:"txtfont",tsz:"txtsize",tl:"txtline",tsh:"txtshad",tp:"txtpad",txtlinecolor:"txtlineclr",ta:"txtalign",intensity:"int",colorize:"col",f:"fit",orient:"or",m:"watermark",mf:"markfit",ms:"markscale",ma:"markalign",mp:"markpad"}},k.getDefaultParamValues=function(){return{sepia:"0",px:"0",htn:"0",blur:"0",col:"","int":"100",hue:"0",sat:"0",bri:"0",con:"0",exp:"0",high:"0",shad:"0",gam:"0",vib:"0",sharp:"0",txt:"",txtsize:"12",txtclr:"000000",txtalign:"bottom,right",txtshad:"0",txtpad:"10",txtline:"0",txtlineclr:"ffffff",rect:"",dpr:"1",fit:"clip",flip:"",or:"0",crop:"",rot:"0",h:"0",w:"0",fm:"",q:75,mark:"",markw:"",markh:"",markfit:"clip",markscale:"",markalign:"bottom,right",markalpha:100,markpad:5}},k.getDefaultParamValue=function(a){return k.getDefaultParamValues()[a]},k.getDefaultParams=function(){return Object.keys(k.getDefaultParamValues())},k.URL=function(a,b,c,d){this.token=c||"",this._autoUpdateSel=null,this._autoUpdateCallback=null,this.isRj=k.isDef(d)?d:!1,this.urlParts=this.isRj?k.parseRjUrl(a):k.parseUrl(a),"object"==typeof b&&this.setParams(b),this.paramAliases={}},k.createParamString=function(){return new k.URL("")},k.URL.prototype._handleAutoUpdate=function(){function a(a){return"img"===a.tagName.toLowerCase()}function b(a,b){b in l||(l[b]=[],function(){var a=document.createElement("img");a.src=b,a.onload=a.onerror=function(){for(var a=0;a<l[b].length;a++)if(c(l[b][a],b),j++,"function"==typeof h._autoUpdateCallback){var d="."+k._setImgixClass(l[b][a]);h._autoUpdateCallback(d,j===i)}}}()),l[b].push(a)}function c(b,c){if(a(b))b.src=c;else{var d=e(b);d?b.style.cssText=b.style.cssText.replace(d,c):b.style.backgroundImage="url("+c+")"}}function d(a){return a.style.cssText.match(/url\(([^\)]+)/)}function e(a){var b=d(a);return b?2===b.length?b[1]:"":""}function f(b){return a(b)?b.src:e(b)}function g(a){var c=f(a),d=c;c&&-1!==c.indexOf("?")&&(d=c.split("?")[0]),h.getBaseUrl()?b(a,h.getUrl()):d&&h.getQueryString()?b(a,d+"?"+h.getQueryString()):j++}var h=this,i=0,j=0,l={};if(null!==this._autoUpdateSel){var m=document.querySelectorAll(this._autoUpdateSel);if(i=m.length,m&&1===i)g(m[0]);else for(var n=0;i>n;n++)g(m[n])}},k.URL.prototype.autoUpdateImg=function(a,b){this._autoUpdateSel=a,this._autoUpdateCallback=b,this._handleAutoUpdate()},k.URL.prototype.setUrl=function(a){this.urlParts=this.isRj?k.parseRjUrl(a):k.parseUrl(a)},k.URL.prototype.getUrl=function(){var a=this.isRj?k.buildRjUrl(this.urlParts):k.buildUrl(this.urlParts);return this.token?this.isRj?k.signRjUrl(a,this.token):k.signUrl(a,this.token):a},k.URL.prototype.removeParam=function(a){this.urlParts.paramValues.hasOwnProperty(a)&&(delete this.urlParts.paramValues[a],this.urlParts.params=Object.keys(this.urlParts.paramValues))},k.URL.prototype.setParams=function(a,b){for(var c in a)this.setParam(c,a[c],b,!0);this._handleAutoUpdate()},k.URL.prototype.setParam=function(a,b,c,d){if(a=a.toLowerCase(),c="undefined"==typeof c?!0:c,d="undefined"==typeof d?!1:d,-1===k.getDefaultParams().indexOf(a))return console.warn('"'+a+'" is an invalid imgix param'),void 0;if(c||!this.urlParts.paramValues[a]){if(k.getDefaultParamValue(a)===b||!k.isDef(b)||0===b.length)return this.removeParam(a),void 0;-1===this.urlParts.params.indexOf(a)&&this.urlParts.params.push(a),this.urlParts.paramValues[a]=String(b),d||this._handleAutoUpdate()}},k.URL.prototype.getParam=function(a){return this.urlParts.paramValues[a]},k.URL.prototype.getBaseUrl=function(){var a=this.getUrl();return-1!==a.indexOf("?")&&(a=this.getUrl().split("?")[0]),a!=window.location.href?a:""},k.URL.prototype.getQueryString=function(){var a=this.getUrl();return-1!==a.indexOf("?")?this.getUrl().split("?")[1]:""},k.URL.theGetSetFuncs=Object.freeze({crop:"Crop",fit:"Fit",h:"Height",w:"Width",rot:"Rotate",flip:"Flip",or:"Orient",hue:"Hue",sat:"Saturation",bri:"Brightness",con:"Contrast",exp:"Exposure",high:"Highlight",shad:"Shadow",gam:"Gamma",vib:"Vibrance",sharp:"Sharpness",sepia:"Sepia",htn:"Halftone",blur:"Blur",col:"Colorize",px:"Pixelate",txt:"Text",txtsize:"TextSize",txtclr:"TextColor",txtalign:"TextAlign",txtshad:"TextShadow",txtpad:"TextPad",txtline:"TextLine",txtlineclr:"TextLineColor",fm:"Format",q:"Quality",mark:"",markw:"",markh:"",markfit:"clip",markscale:"",markalign:"bottom,right",markalpha:100,markpad:5});for(var l in k.URL.theGetSetFuncs)!function(){var a=l;k.URL.prototype["set"+k.URL.theGetSetFuncs[a]]=function(b,c){this.setParam(a,b,c)},k.URL.prototype["get"+k.URL.theGetSetFuncs[a]]=function(){return this.getParam(a)}}();k.parseRjUrl=function(a){var b=["protocol","hostname","port","pathname","search","hash","host"],c=document.createElement("a"),d={};c.href=a;for(var e=c.pathname.split("p:"),f=e[0],g=e[1]&&-1!==e[1].indexOf("=")?e[1].match(/([^/]+)/)[1]:"",h=e[1]?e[1].replace(g,""):"",i=0;i<b.length;i++)d[b[i]]=c[b[i]];if(d.pathname=h,d.search=g,d.sig=f||"",d.paramValues={},d.params=[],d.baseUrl=h,-1!==f.indexOf(".")&&(d.baseUrl=a.split("?")[0]),g&&g.length>0)for(var e=g.split("&"),j=0;j<e.length;j++){var k=e[j].split("=");k[0]&&k[0].length&&(d.paramValues[k[0]]=2===k.length?k[1]:"",d.params.push(k[0]))}return d},k.buildRjUrl=function(a){var b=a.protocol+"//"+a.host+a.sig;if(a.params.length>0){for(var c=[],d=0;d<a.params.length;d++)a.paramValues[a.params[d]].length>0&&c.push(a.params[d]+"="+a.paramValues[a.params[d]]);b+="p:"+c.join("&")}else b+="p:";return b+=a.pathname,b+a.hash},k.parseUrl=function(a){var b=["protocol","hostname","port","pathname","search","hash","host"],c={},d=document.createElement("a");d.href=a;for(var e=0;e<b.length;e++)c[b[e]]=d[b[e]];var f=c.search;if(c.paramValues={},c.params=[],c.baseUrl=a.split("?")[0],f&&f.length>0){"?"===f[0]&&(f=f.substr(1,f.length));for(var g=f.split("&"),h=0;h<g.length;h++){var i=g[h].split("=");i[0]&&i[0].length&&"s"!==i[0]&&(c.paramValues[i[0]]=2===i.length?i[1]:"",c.params.push(i[0]))}}return c},k.buildUrl=function(a){var b=a.protocol+"//"+a.host+a.pathname;if(a.params.length>0){for(var c=[],d=0;d<a.params.length;d++)a.paramValues[a.params[d]].length>0&&c.push(a.params[d]+"="+a.paramValues[a.params[d]]);b+="?"+c.join("&")}return b},k.signRjUrl=function(a,b){var c=k.parseUrl(a),d=c.pathname.match(/([\w\-_*]+)/g),e=d[0];return sig_location=a.indexOf(e)+e.length+1,rest=a.substr(sig_location),find_path=rest.match(/([^\/]+)(.+)/g),path=find_path[1],args="/"+rest.replace(path,""),concat=b+args,new_sig=k.safe_btoa_encode(h(concat)).substr(0,8),new_url=a.replace(e,new_sig),new_url},k.signUrl=function(a,b){if(b){var c=k.parseUrl(a),d=k.md5(b+c.pathname+c.search);-1===a.indexOf("?")?(d=k.md5(b+c.pathname),a=a+"?s="+d):a=a+"&s="+d}return a},k.isDef=function(a){return"undefined"!=typeof a},k.safe_btoa_encode=function(a){return window.btoa(a).replace(/\+/g,"-").replace(/\//g,"_")},k.safe_btoa_decode=function(a){return window.atob(a.replace(/\-+/g,"+").replace(/_+/g,"/"))},k.md5=function(a){return i(a)};var m=new Array(0,3614090360,3905402710,606105819,3250441966,4118548399,1200080426,2821735955,4249261313,1770035416,2336552879,4294925233,2304563134,1804603682,4254626195,2792965006,1236535329,4129170786,3225465664,643717713,3921069994,3593408605,38016083,3634488961,3889429448,568446438,3275163606,4107603335,1163531501,2850285829,4243563512,1735328473,2368359562,4294588738,2272392833,1839030562,4259657740,2763975236,1272893353,4139469664,3200236656,681279174,3936430074,3572445317,76029189,3654602809,3873151461,530742520,3299628645,4096336452,1126891415,2878612391,4237533241,1700485571,2399980690,4293915773,2240044497,1873313359,4264355552,2734768916,1309151649,4149444226,3174756917,718787259,3951481745),n=new Array(new Array(0,7,1),new Array(1,12,2),new Array(2,17,3),new Array(3,22,4),new Array(4,7,5),new Array(5,12,6),new Array(6,17,7),new Array(7,22,8),new Array(8,7,9),new Array(9,12,10),new Array(10,17,11),new Array(11,22,12),new Array(12,7,13),new Array(13,12,14),new Array(14,17,15),new Array(15,22,16)),o=new Array(new Array(1,5,17),new Array(6,9,18),new Array(11,14,19),new Array(0,20,20),new Array(5,5,21),new Array(10,9,22),new Array(15,14,23),new Array(4,20,24),new Array(9,5,25),new Array(14,9,26),new Array(3,14,27),new Array(8,20,28),new Array(13,5,29),new Array(2,9,30),new Array(7,14,31),new Array(12,20,32)),p=new Array(new Array(5,4,33),new Array(8,11,34),new Array(11,16,35),new Array(14,23,36),new Array(1,4,37),new Array(4,11,38),new Array(7,16,39),new Array(10,23,40),new Array(13,4,41),new Array(0,11,42),new Array(3,16,43),new Array(6,23,44),new Array(9,4,45),new Array(12,11,46),new Array(15,16,47),new Array(2,23,48)),q=new Array(new Array(0,6,49),new Array(7,10,50),new Array(14,15,51),new Array(5,21,52),new Array(12,6,53),new Array(3,10,54),new Array(10,15,55),new Array(1,21,56),new Array(8,6,57),new Array(15,10,58),new Array(6,15,59),new Array(13,21,60),new Array(4,6,61),new Array(11,10,62),new Array(2,15,63),new Array(9,21,64)),r=new Array(new Array(a,n),new Array(b,o),new Array(c,p),new Array(d,q))}).call(this);